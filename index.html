const express = require('express');
const cors = require('cors');

const app = express();
const PORT = process.env.PORT || 10000;

app.use(cors());

// 🔍 Predefined Facebook profiles list
const profiles = [
  { name: "Shaun Dee", profileUrl: "https://www.facebook.com/ShaunDeeOfficial" },
  { name: "Jane Doe", profileUrl: "https://www.facebook.com/janedoe" },
  { name: "Benji Dog", profileUrl: "https://www.facebook.com/benjithedog" },
  { name: "Eli Queen", profileUrl: "https://www.facebook.com/eli.queen.png" },
  { name: "Donovan Pintol", profileUrl: "https://www.facebook.com/donovan.pintol" },
  { name: "PNG Youth Advocate", profileUrl: "https://www.facebook.com/pngyouthvoice" },
  { name: "Fake Profile Alert", profileUrl: "https://www.facebook.com/fakeprofilewatch" },
  { name: "Row for the Future", profileUrl: "https://www.facebook.com/rowforthefuture" }
];

app.get('/search', (req, res) => {
  const username = req.query.username?.toLowerCase();
  if (!username) {
    return res.status(400).json({ error: 'Missing username' });
  }

  const results = profiles.filter(p => p.name.toLowerCase().includes(username));
  if (results.length === 0) {
    return res.json({ message: '❗ No profiles found matching that username.' });
  }

  res.json({ profiles: results });
});

app.get('/', (req, res) => {
  res.send("✅ Monzta Eyes is live. Use /search?username=NAME to test.");
});

app.listen(PORT, () => {
  console.log(`Server running on port ${PORT}`);
});
