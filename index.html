<!DOCTYPE html>
<html>
<head>
  <title>Facebook Profile Finder</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 30px; }
    input, button { padding: 10px; font-size: 16px; }
    button { margin-left: 10px; }
    ul { padding: 0; list-style: none; }
    li { margin: 10px 0; }
  </style>
</head>
<body>

<h2>üîê Log in with Facebook</h2>
<div class="fb-login-button"
     data-width=""
     data-size="large"
     data-button-type="continue_with"
     data-layout="default"
     data-auto-logout-link="true"
     data-use-continue-as="true"
     data-scope="public_profile"
     onlogin="checkLoginState();"></div>

<h2>üîé Search Facebook Profiles</h2>
<input id="username" placeholder="Enter name" />
<button onclick="search()">Search</button>

<ul id="results"></ul>

<script>
  let accessToken = null;

  function checkLoginState() {
    FB.getLoginStatus(function(response) {
      if (response.status === 'connected') {
        accessToken = response.authResponse.accessToken;
        alert("‚úÖ Logged in!");
      } else {
        alert("‚ùó Please log in to Facebook.");
      }
    });
  }

  async function search() {
    const name = document.getElementById('username').value.trim();
    const resultsEl = document.getElementById('results');
    resultsEl.innerHTML = "Loading...";

    if (!accessToken) {
      resultsEl.innerHTML = "<li>‚ùó Please log in first.</li>";
      return;
    }

    try {
      const res = await fetch(`https://graph.facebook.com/v19.0/search?type=user&q=${encodeURIComponent(name)}&access_token=${accessToken}`);
      const data = await res.json();

      resultsEl.innerHTML = "";

      if (data.error) {
        resultsEl.innerHTML = `<li>Error: ${data.error.message}</li>`;
        return;
      }

      if (!data.data || data.data.length === 0) {
        resultsEl.innerHTML = `<li>No profiles found.</li>`;
        return;
      }

      data.data.forEach(profile => {
        const li = document.createElement('li');
        li.innerHTML = `<b>${profile.name}</b> ‚Äî ID: ${profile.id}`;
        resultsEl.appendChild(li);
      });
    } catch (e) {
      resultsEl.innerHTML = `<li>‚ùå Failed to fetch profiles.</li>`;
    }
  }
</script>

<!-- Facebook SDK -->
<script async defer crossorigin="anonymous"
  src="https://connect.facebook.net/en_US/sdk.js">
</script>

<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : '1068646731939406', // üëà Your App ID
      cookie     : true,
      xfbml      : true,
      version    : 'v19.0' // or latest
    });

    FB.AppEvents.logPageView();
  };
</script>

</body>
</html>
